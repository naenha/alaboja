
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY HOME</title>
    <style>
        .dropdown-menu {
        max-height:150px;
        overflow-y:scroll;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</head>
<body>
    <form action={% url 'alaboja:myhome' %} method="POST">
      {% csrf_token %}
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
          <div class="container-fluid">
            <a class="navbar-brand" href="#">조건</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" 
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <!--1-->
                <li class="scrollable">
                  <a>
                    &nbsp;&nbsp;가구원 수
                  </a>
                  <select name="people">
                    <option value="1" selected>1인</option>
                    <option value="2">2인</option>
                    <option value="3">3인</option>
                    <option value="4">4인</option>
                    <option value="5">5인</option>
                    <option value="6">6인</option>
                    <option value="7">7인</option>
                  </select>
                </li>

                <!--2-->
                <li class="nav-item dropdown">
                  <a>
                    &nbsp; &nbsp;공급유형
                  </a>
                  <select name="category">
                    <option value="대학생" selected>대학생</option>
                    <option value="신혼부부">신혼부부</option>
                    <option value="고령자">고령자</option>
                    <option value="청년(사회초년생)">청년(사회초년생)</option>
                    <option value="수급자">수급자</option>
                  </select>
                </li>

                <!--3-->
                <li class="nav-item dropdown">
                  <a>
                    &nbsp; &nbsp;소득분위
                  </a>
                  <select name="rating">
                    <option value="1" selected>1순위</option>
                    <option value="2">2순위</option>
                    <option value="3">3순위</option>
                    <option value="4">4순위</option>
                    <option value="5">5순위</option>
                    <option value="6">6순위</option>
                    <option value="7">7순위</option>
                    <option value="8">8순위</option>
                    <option value="9">9순위</option>
                    <option value="10">10순위</option>
                  </select>
                </li>

                <!--4-->
                <li class="nav-item dropdown">
                  <a>
                    &nbsp; &nbsp;소득/자산
                  </a>
                  <select name="income">
                    <option value="50" selected>50% 이하</option>
                    <option value="70">70% 이하</option>
                    <option value="100">100% 이하</option>
                    <option value="120">120% 이하</option>
                    <option value="150">150% 이하</option>
                  </select>
                </li>

                <!--5-->
                <li class="nav-item dropdown">
                  <a>
                    &nbsp; &nbsp;행정구
                  </a>
                  <select name="gu">
                    <option value="강남구" selected>강남구</option>
                    <option value="강동구">강동구</option>
                    <option value="강서구">강서구</option>
                    <option value="강북구">강북구</option>
                    <option value="관악구">관악구</option>
                    <option value="광진구">광진구</option>
                    <option value="구로구">구로구</option>
                    <option value="금천구">금천구</option>
                    <option value="노원구">노원구</option>
                    <option value="동대문구">동대문구</option>
                    <option value="도봉구">도봉구</option>
                    <option value="동작구">동작구</option>
                    <option value="마포구">마포구</option>
                    <option value="서대문구">서대문구</option>
                    <option value="성동구">성동구</option>
                    <option value="성북구">성북구</option>
                    <option value="서초구">서초구</option>
                    <option value="송파구">송파구</option>
                    <option value="영등포구">영등포구</option>
                    <option value="용산구">용산구</option>
                    <option value="양천구">양천구</option>
                    <option value="은평구">은평구</option>
                    <option value="종로구">종로구</option>
                    <option value="중구">중구</option>
                  </select>
                </li>
                
                <!--6-->
                <li class="nav-item dropdown">
                  <a>
                    &nbsp; &nbsp;희망전용면적
                  </a>
                  <select name="area">
                    <option value="40" selected>40 제곱미터 미만</option>
                    <option value="40-60">40~60 제곱미터 미만</option>
                    <option value="60-85">60~85 제곱미터 미만</option>
                    <option value="85">85제곱미터 초과</option>
                  </select>
                </li>
              
                &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
                &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;
                <button class="btn btn-outline-success btn-small" type="submit">Submit</button>

              </ul>
            </div>
          </div>
      </nav>
    </form>

    <div id="map" style="width:100%;height:350px;"></div>

    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=884338eb77d514ac6bec2837834aac1d"></script>
    <p>
      <button type="button" class="btn btn-outline-primary" onclick="setBounds()">지도 범위 재설정</button>
      <!--<button onclick="setBounds()">지도 범위 재설정 하기</button> -->
    </p>
    <script>
      var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
          mapOption = { 
              center: new kakao.maps.LatLng(37.5429, 126.9887), // 지도의 중심좌표
              level: 6 // 지도의 확대 레벨
          };
      
      var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
      var mapTypeControl = new kakao.maps.MapTypeControl();

      // 지도에 컨트롤을 추가해야 지도위에 표시됩니다
      // kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
      map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

      // 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
      var zoomControl = new kakao.maps.ZoomControl();
      map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);
       
      // 버튼을 클릭하면 아래 배열의 좌표들이 모두 보이게 지도 범위를 재설정합니다 
      var points = [
          {
              content: '<div style="width:150px;text-align:center;padding:6px 0;">카카오</div>', 
              latlng: new kakao.maps.LatLng(33.450705, 126.570677)
          },
          {
              content: '<div style="width:150px;text-align:center;padding:6px 0;">생태연못</div>', 
              latlng: new kakao.maps.LatLng(33.450936, 126.569477)
          },
          {
              content: '<div style="width:150px;text-align:center;padding:6px 0;">텃밭</div>', 
              latlng: new kakao.maps.LatLng(33.450879, 126.569940)
          },
          {
              content: '<div style="width:150px;text-align:center;padding:6px 0;">근린공원</div>',
              latlng: new kakao.maps.LatLng(33.451393, 126.570738)
          }
      ];
      
      // 지도를 재설정할 범위정보를 가지고 있을 LatLngBounds 객체를 생성합니다
      var bounds = new kakao.maps.LatLngBounds();    
      
      var i, marker;
      for (i = 0; i < points.length; i++) {
          // 배열의 좌표들이 잘 보이게 마커를 지도에 추가합니다
          marker =     new kakao.maps.Marker({
              map : map,
              position : points[i].latlng 
          });

          marker.setMap(map);
          bounds.extend(points[i].latlng); // LatLngBounds 객체에 좌표를 추가합니다

          var infowindow = new kakao.maps.InfoWindow({
              content: points[i].content // 인포윈도우에 표시할 내용
          });

          // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
          // 이벤트 리스너로는 클로저를 만들어 등록합니다 
          // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
          kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
          kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
      }
      
      function setBounds() {
          // LatLngBounds 객체에 추가된 좌표들을 기준으로 지도의 범위를 재설정합니다
          // 이때 지도의 중심좌표와 레벨이 변경될 수 있습니다
          map.setBounds(bounds);
      }
        // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
        function makeOverListener(map, marker, infowindow) {
          return function() {
              infowindow.open(map, marker);
          };
      }

      // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
      function makeOutListener(infowindow) {
          return function() {
              infowindow.close();
          };
      }
  </script>

</body>
</html>